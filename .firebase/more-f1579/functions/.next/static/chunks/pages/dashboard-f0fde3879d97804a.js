(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(7741)}])},9895:function(e,t,n){"use strict";n.d(t,{_:function(){return f}});var i=n(5893),a=n(7294),o=n(3078),s=n(356),r=n(9786),l=n(7113),c=n(5675),d=n.n(c),h=n(1664),u=n.n(h),m=n(1163),p=n(6150),_=n.n(p);let v=[{link:"/dashboard",label:"Home"},{link:"/about",label:"About"},{link:"/leaderboard",label:"Leaderboard"},{link:"/contact",label:"Contact"}];function f(){let[e,{toggle:t,close:n}]=(0,l.q)(!1),c=(0,m.useRouter)(),[h,p]=(0,a.useState)(c.pathname),f=v.map(e=>(0,i.jsx)(u(),{href:e.link,className:_().link,"data-active":h===e.link||void 0,onClick:()=>p(e.link),children:e.label},e.label)),b=v.map(e=>(0,i.jsx)(u(),{href:e.link,className:_().link,"data-active":h===e.link||void 0,onClick:()=>{p(e.link),n()},children:e.label},e.label));return(0,i.jsxs)("header",{className:_().header,children:[(0,i.jsx)(d(),{src:"/images/more-logo.png",alt:"Company Logo",width:130,height:130,className:_().logo}),(0,i.jsx)(o.W,{size:"md",className:_().inner,children:(0,i.jsx)(s.Z,{gap:5,className:_().desktopLinks,children:f})}),(0,i.jsx)("div",{className:_()["burger-container"],children:(0,i.jsx)(r.O,{opened:e,onClick:t,size:"sm"})}),e&&(0,i.jsx)("div",{className:_().mobileLinks,children:b})]})}},3194:function(e,t,n){"use strict";n.d(t,{x:function(){return p}});var i=n(5893),a=n(967),o=n(356),s=n(1992),r=n(8565),l=n(3502),c=n(4158),d=n(5713),h=n(3006),u=n.n(h);let m=[{link:"/dashboard",label:"Home"},{link:"/about",label:"About"},{link:"/contact",label:"Contact"}];function p(){let e=m.map(e=>(0,i.jsx)(a.e,{c:"dimmed",href:e.link,lh:1,onClick:e=>e.preventDefault(),size:"sm",children:e.label},e.label));return(0,i.jsx)("footer",{className:u().footer,children:(0,i.jsxs)("div",{className:u().inner,children:[(0,i.jsx)(o.Z,{className:u().links,children:e}),(0,i.jsxs)(o.Z,{className:u().iconContainer,gap:"xs",justify:"flex-end",wrap:"nowrap",children:[(0,i.jsx)(s.A,{size:"lg",variant:"default",radius:"xl",children:(0,i.jsx)(l.Z,{style:{width:(0,r.h)(18),height:(0,r.h)(18)},stroke:1.5})}),(0,i.jsx)(s.A,{size:"lg",variant:"default",radius:"xl",children:(0,i.jsx)(c.Z,{style:{width:(0,r.h)(18),height:(0,r.h)(18)},stroke:1.5})}),(0,i.jsx)(s.A,{size:"lg",variant:"default",radius:"xl",children:(0,i.jsx)(d.Z,{style:{width:(0,r.h)(18),height:(0,r.h)(18)},stroke:1.5})})]})]})})}},3444:function(e,t,n){"use strict";n.d(t,{I:function(){return r},db:function(){return l}});var i=n(3977);n(3059);var a=n(1259),o=n(9828);let s=(0,i.ZF)({apiKey:"AIzaSyAS2RAJanlflg5Xudy8VCFiUMAz1tpEKFw",authDomain:"more-f1579.firebaseapp.com",projectId:"more-f1579",storageBucket:"more-f1579.appspot.com",messagingSenderId:"675524787031",appId:"1:675524787031:web:e122a81b58e5154dd15c12",measurementId:"G-TJSHHBM91X"}),r=(0,a.v0)(s),l=(0,o.ad)(s)},7741:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var i=n(5893),a=n(7294),o=n(7054),s=n(1163),r=n(3444),l=n(9828),c=n(1259),d=n(6250),h=n.n(d),u=n(2189),m=n.n(u);let p={1:"EarthChild project",2:"Green Pop",3:"Animal Ocean"},_={1:"#F8BF62",2:"#00BF63",3:"#5271FF"};var v=function(e){let{userId:t,currentInitiative:n,onUpdateInitiative:o,isVisible:s}=e,[c,d]=(0,a.useState)(n),[h,u]=(0,a.useState)(!1),v=async e=>{d(e);try{await (0,l.r7)((0,l.JU)(r.db,"users",t),{initiative:e}),o(e),u(!0),setTimeout(()=>u(!1),3e3)}catch(e){console.error("Error updating initiative: ",e)}};return(0,i.jsxs)("div",{className:"".concat(m().sidebar," ").concat(s?m().sidebarVisible:""),children:[Object.entries(p).map(e=>{let[t,n]=e;return(0,i.jsx)("button",{className:m().initiativeButton,style:{backgroundColor:c===Number(t)?_[t]:"#b4d6cd"},onClick:()=>v(Number(t)),children:n},t)}),h&&(0,i.jsxs)("div",{className:m().confirmationPopup,children:["You now support ",p[c],"."]})]})},f=n(3114),b=n(375),x=n(7354),k=n.n(x),g=()=>(0,i.jsx)(b.E.div,{className:k().checkmarkContainer,initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1,rotate:360},exit:{scale:.5,opacity:0},transition:{duration:.7,ease:"easeInOut"},children:(0,i.jsx)(b.E.div,{className:k().checkmark,children:(0,i.jsx)(b.E.div,{className:k().check})})}),C=n(1412),j=n.n(C),y=function(e){let{onClose:t,onConfirm:n,shopName:o}=e,[s,r]=(0,a.useState)(!1);return(0,i.jsx)("div",{className:j().overlay,children:(0,i.jsx)("div",{className:j().popup,children:(0,i.jsx)(f.M,{children:s?(0,i.jsx)(g,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h2",{children:["Hello ",o," Patron!"]}),(0,i.jsx)("p",{children:"Please click the button below to log your donation."}),(0,i.jsx)("button",{className:j().closeButton,onClick:()=>{r(!0),n(),setTimeout(()=>{r(!1),t()},2500)},children:"Confirm Donation"})]})})})})},w=n(3194),N=n(9895),E=n(4856);n(9033);let S={lat:-33.93627391449209,lng:18.418980177812504},z={zoom:14,disableDefaultUI:!0,zoomControl:!1,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,fullscreenControl:!1};var I=function(){let[e,t]=(0,a.useState)([]),[n,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[p,_]=(0,a.useState)(null),[f,b]=(0,a.useState)(null),[x,k]=(0,a.useState)(null),[g,C]=(0,a.useState)(Date.now()),[j,I]=(0,a.useState)(!0),[L,A]=(0,a.useState)(null),P=(0,s.useRouter)(),{query:F}=P,H=F.shop||"",T=(0,a.useCallback)(()=>window.google?class extends window.google.maps.OverlayView{draw(){this.div||(this.div=document.createElement("div"),this.div.style.position="absolute",this.div.style.cursor="pointer",this.div.style.width="25px",this.div.style.height="25px",this.div.style.backgroundImage="url(".concat(this.icon,")"),this.div.style.backgroundSize="cover",this.div.style.transition="transform 0.3s ease",this.div.addEventListener("mouseover",()=>{this.div.style.transform="scale(1.25)",this.div.style.zIndex="1000"}),this.div.addEventListener("mouseout",()=>{this.div.style.transform="scale(1)",this.div.style.zIndex=""}),this.div.addEventListener("click",this.onClick),this.getPanes().overlayMouseTarget.appendChild(this.div));let e=this.getProjection().fromLatLngToDivPixel(this.position);e&&(this.div.style.left="".concat(e.x-12.5,"px"),this.div.style.top="".concat(e.y-12.5,"px"))}onRemove(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)}constructor(e,t,n,i){super(),this.position=e,this.icon=n,this.onClick=i,this.setMap(t)}}:null,[]);(0,a.useEffect)(()=>{(async()=>{try{let e=(await (0,l.PL)((0,l.hJ)(r.db,"companies"))).docs.map(e=>{let t=e.data(),[n,i]=t.location.split(", ").map(Number);return{id:e.id,name:t.name,location:{lat:n,lng:i}}});if(t(e),H&&""!==H.trim()){let t=e.some(e=>e.name.toLowerCase()===H.toLowerCase());d(t)}else d(!1)}catch(e){console.error("Error fetching companies: ",e)}})(),H||P.push("/dashboard")},[H]),(0,a.useEffect)(()=>{let e=()=>{I(!1),setTimeout(()=>I(!0),3)};return P.events.on("routeChangeComplete",e),()=>{P.events.off("routeChangeComplete",e)}},[P]),(0,a.useEffect)(()=>{let e=(0,c.Aj)(r.I,async e=>{if(e){m(e.uid);try{let t=(await (0,l.QT)((0,l.JU)(r.db,"users",e.uid))).data();_(t.initiative),A(t.username)}catch(e){console.error("Error fetching user initiative: ",e)}}});return()=>e()},[]),(0,a.useEffect)(()=>{f&&e.length>0&&x&&e.forEach(e=>{new x(e.location,f,"/images/coffee-icon.png",()=>B(e))})},[f,e,x]);let D=async()=>{if(u&&p)try{await (0,l.pl)((0,l.JU)(r.db,"donations","".concat(Date.now())),{timestamp:new Date,initiative:p,shop:H}),console.log("Donation confirmed and added to database"),d(!1)}catch(e){console.error("Error recording donation: ",e)}},B=e=>{let t="https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(e.name));window.open(t,"_blank")},Z=(0,a.useCallback)(e=>{b(e);let t=T();k(()=>t)},[T]);return(0,i.jsxs)("div",{className:h().pageWrapperDash,children:[(0,i.jsx)(N._,{}),(0,i.jsx)(E.M,{children:(0,i.jsxs)("div",{className:h().container,children:[(0,i.jsxs)("div",{className:h().mapContainer,children:[j&&(0,i.jsx)(o.LM,{googleMapsApiKey:"AIzaSyCJ8NYRJFLpJx_njieRHf5YVlmWfIZg_to",children:(0,i.jsx)(o.b6,{mapContainerClassName:h().mapContainer,center:S,zoom:12,options:z,onLoad:Z})}),n&&(0,i.jsx)(y,{onClose:()=>{d(!1)},onConfirm:D,shopName:H})]}),u&&p&&(0,i.jsx)("div",{className:h().switcherContainer,children:(0,i.jsx)(v,{userId:u,currentInitiative:p,onUpdateInitiative:e=>_(e)})})]})}),(0,i.jsx)(w.x,{})]})}},7354:function(e){e.exports={checkmarkContainer:"ConfirmationAnimation_checkmarkContainer__U_1x0",checkmark:"ConfirmationAnimation_checkmark__Yorh9",check:"ConfirmationAnimation_check__zjTqQ"}},3006:function(e){e.exports={footer:"FooterCentered_footer__AeTnw",inner:"FooterCentered_inner__4r_jl",links:"FooterCentered_links__rFHdD",iconContainer:"FooterCentered_iconContainer__msbuG"}},6150:function(e){e.exports={header:"Header_header__072v2",logo:"Header_logo__0dir7",inner:"Header_inner__tdLVe",link:"Header_link__gnQyJ","burger-container":"Header_burger-container__0HjoO",mobileLinks:"Header_mobileLinks__ntD1M"}},6250:function(e){e.exports={pageWrapperDash:"dashboard_pageWrapperDash__G7tzZ",container:"dashboard_container__UvVTH",mapContainer:"dashboard_mapContainer__XyRrx",switcherContainer:"dashboard_switcherContainer__VtQpm",header:"dashboard_header__6byBt",logo:"dashboard_logo__azaZ1",mapTitle:"dashboard_mapTitle__r179o",bouncingBall:"dashboard_bouncingBall__ZdOXM",bounce:"dashboard_bounce___h_69"}},1412:function(e){e.exports={overlay:"donationPopup_overlay__oQlXg",popup:"donationPopup_popup__l_tP7",closeButton:"donationPopup_closeButton__Py_tC"}},2189:function(e){e.exports={header:"initiativeSwitcher_header__hkqIq",initiativeButton:"initiativeSwitcher_initiativeButton__9svfz",confirmationPopup:"initiativeSwitcher_confirmationPopup__auZ_z"}}},function(e){e.O(0,[428,16,255,580,675,649,438,253,7,888,774,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);